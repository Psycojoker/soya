-extends "base.haml"
-load bootstrap3
-load staticfiles

-block head
  :css
    .progress {
      background-color: #FFFFFF;
    }

-block content
  -# put here to allow DjangoResumable to get it
  -csrf_token

  %div{ng-app: "soya", ng-controller: "VideoUploadController"}
    %div{ng-repeat: "upload in uploads"}
      .well
        %form{method: "post", id: "upload_form_{& upload.id &}"}
          %fieldset
            -csrf_token
            .row
              .col-md-6
                .form-group{class: "{% if form.title.errors %}has-error{% elif form.data and form.title %}has-success{% endif %}"}
                  %label.control-label{for: "title"}
                    Titre de la vidéo
                  %input#id_title.form-control{type: "text", required: "", placeholder: "Titre de la vidéo", name: "title", value: ""}
                  -for error in form.title.errors
                    %span.help-block= error
              .col-md-6
                -bootstrap_field form.subsubsection
            -bootstrap_field form.file_name
          %button.btn.btn-primary{type: "submit"}
            Send

    %button.btn.btn-primary{ng-click: "addUpload()"}
      Uploader une vidéo en plus

- block javascript
  %script{src: "{{ STATIC_URL }}js/resumable.js", type: "text/javascript"}
  %script{src:"{{ STATIC_URL }}js/django-resumable.js", type:"text/javascript"}
  %script{src: "{{ STATIC_URL }}js/upload.js"}
